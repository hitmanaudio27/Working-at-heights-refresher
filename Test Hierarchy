<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EBTA • Hierarchy of Control – Apple Glass</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --panel-glass: rgba(255,255,255,0.72);
      --panel-border: rgba(255,255,255,0.18);
      --ink-1:#1D1D1F; --ink-2:#515154; --ink-3:#6E6E73;
      --accent:#007AFF;
    }
    *{box-sizing:border-box;margin:0}
    html{font-family:Inter,-apple-system,BlinkMacSystemFont,"SF Pro",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
         -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    body{height:100vh;overflow:hidden;background:linear-gradient(145deg,#F5F5F7 0%,#FAFAFA 55%,#E8E8ED 100%);color:var(--ink-1)}
    .ambient{
      position:fixed;inset:-50%;
      background:
        radial-gradient(60% 60% at 20% 25%,rgba(0,122,255,.10) 0%,transparent 70%),
        radial-gradient(70% 70% at 80% 70%,rgba(175,82,222,.06) 0%,transparent 70%);
      animation:drift 40s ease-in-out infinite alternate;
      pointer-events:none;z-index:0
    }
    @keyframes drift{from{transform:translate(0,0)}to{transform:translate(-10px,-10px)}}
    .grid{
      position:relative;z-index:1;height:100vh;width:100vw;display:grid;
      grid-template-areas:"h h h" "p n c" "f f f";
      grid-template-rows:96px 1fr 72px; grid-template-columns:48% 1fr 300px; gap:16px; padding:16px;
    }
    .panel{
      background:var(--panel-glass); backdrop-filter:saturate(180%) blur(20px); -webkit-backdrop-filter:saturate(180%) blur(20px);
      border:0.5px solid var(--panel-border); border-radius:20px; box-shadow:0 10px 15px rgba(0,0,0,.06),0 4px 6px rgba(0,0,0,.03);
      position:relative; overflow:hidden;
    }
    .hdr{grid-area:h;display:flex;align-items:center;justify-content:space-between;padding:0 28px}
    .hdr .brand{font-weight:700;letter-spacing:-.02em}
    .hdr .sub{font-size:.8rem;color:var(--ink-3)}
    .title{font-weight:800;letter-spacing:-.03em;background:linear-gradient(135deg,#1D1D1F,var(--accent));
           -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .pyr{grid-area:p;position:relative}
    .narr{grid-area:n;padding:28px;overflow:auto}
    .ctrl{grid-area:c;padding:24px;display:flex;flex-direction:column;gap:10px}
    .ftr{grid-area:f;display:flex;align-items:center;justify-content:space-between;padding:0 28px;font-size:.9rem;color:var(--ink-2)}
    .btn{
      width:100%;padding:14px 16px;background:rgba(0,0,0,.02);border:0.5px solid rgba(0,0,0,.05);
      border-radius:12px;font-weight:500;color:var(--ink-1);cursor:pointer;transition:transform .18s ease,background .18s ease,border-color .18s ease;
      text-align:left
    }
    .btn:hover{background:rgba(0,0,0,.05);transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 6px 16px rgba(0,122,255,.28)}
    .util{margin-top:auto;display:flex;gap:8px}
    .util button{flex:1}
    /* Pyramid backplate – darker to let glass read */
    .pyr::after{
      content:""; position:absolute; inset:0; border-radius:20px;
      background:radial-gradient(120% 100% at 50% 0%, rgba(10,12,18,.78), rgba(10,12,18,.55) 40%, rgba(10,12,18,.42) 100%);
      z-index:0;
    }
    canvas#stage{position:absolute; inset:0; border-radius:20px; z-index:1}
    .story{display:none;animation:fade .35s ease}
    .story.active{display:block}
    @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    .story h2{font-size:1.6rem;margin-bottom:8px}
    .story p{color:var(--ink-2);line-height:1.6}
    @media (max-width:1200px){
      .grid{grid-template-areas:"h h" "p n" "c c" "f f"; grid-template-columns:1fr 1fr; grid-template-rows:88px 1fr auto 64px}
    }
    @media (max-width:820px){
      .grid{grid-template-areas:"h" "p" "n" "c" "f"; grid-template-columns:1fr; grid-template-rows:80px 40vh auto auto 56px}
    }
    @media (prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;transition:none!important}}
  </style>
</head>
<body>
  <div class="ambient"></div>

  <main class="grid">
    <header class="panel hdr">
      <div>
        <div class="brand">EBTA</div>
        <div class="sub">Excellence in Bridge Technology</div>
      </div>
      <div style="text-align:center">
        <h1 class="title">Hierarchy of Control</h1>
        <div class="sub">Interactive 3D Safety Experience</div>
      </div>
      <div style="text-align:right">
        <div class="brand">Eastern Freeway</div>
        <div class="sub">$4B Government Project</div>
      </div>
    </header>

    <section class="panel pyr">
      <canvas id="stage" aria-label="3D Glass Pyramid" role="img"></canvas>
    </section>

    <section class="panel narr">
      <div id="story-default" class="story active">
        <h2>EBTA Prevention-First Philosophy</h2>
        <p>The inverted triangle represents EBTA's commitment to prevention over protection. The wider the level, the more effective the control. We start with elimination at the top and work down only when absolutely necessary.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px;border-left:3px solid var(--accent)">
          <h4 style="color:var(--accent);margin-bottom:8px">Eastern Freeway Excellence</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>70% reduction in height work through innovative prefabrication</li>
            <li>$2.3M saved through proactive Safety in Design initiatives</li>
            <li>Industry-leading safety performance metrics achieved</li>
            <li>Tier 1 builder standards exceeded on $4 billion project</li>
          </ul>
        </div>
      </div>
      
      <div id="story-1" class="story">
        <h2 style="color:#FF3B30">Level 1: ELIMINATION</h2>
        <p style="font-weight:500;margin-bottom:16px">Most Effective Control</p>
        <p>EBTA eliminated 70% of height work on the Eastern Freeway through revolutionary prefabrication and design innovation, setting new industry standards.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(255,59,48,0.05);border-radius:12px;border-left:3px solid #FF3B30">
          <h4 style="color:#FF3B30;margin-bottom:8px">Revolutionary Achievements</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Bridge segments prefabricated in controlled ground-level environment</li>
            <li>Permanent guardrails cast directly into concrete structural elements</li>
            <li>Modular assembly process eliminated 200+ hours of dangerous height work</li>
            <li>Safety in Design workshops identified 15 major elimination opportunities</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Measurable Impact</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>$800K cost savings through reduced scaffolding requirements</li>
            <li>3 weeks ahead of schedule due to efficient elimination processes</li>
            <li>Industry recognition for innovative safety approach</li>
            <li>Government commendation for excellence in safety design</li>
          </ul>
        </div>
      </div>
      
      <div id="story-2" class="story">
        <h2 style="color:#FF9500">Level 2: SUBSTITUTION</h2>
        <p style="font-weight:500;margin-bottom:16px">Safer Alternatives</p>
        <p>When elimination wasn't possible, EBTA substituted high-risk methods with cutting-edge safer alternatives, transforming industry practices.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(255,149,0,0.05);border-radius:12px;border-left:3px solid #FF9500">
          <h4 style="color:#FF9500;margin-bottom:8px">Technology-Driven Solutions</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>MEWPs replaced 80% of traditional ladder work operations</li>
            <li>IRATA-certified rope access for precision bridge inspections</li>
            <li>Advanced mechanical lifting eliminated manual handling at height</li>
            <li>Remote concrete testing reduced technician exposure by 60%</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Innovation Highlights</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Custom MEWP configurations for specialized bridge bearing work</li>
            <li>Drone technology integration for structural assessments</li>
            <li>Travel restraint systems prioritized over fall arrest methods</li>
            <li>Automated positioning systems for repetitive tasks</li>
          </ul>
        </div>
      </div>
      
      <div id="story-3" class="story">
        <h2 style="color:#FFCC00">Level 3: ISOLATION</h2>
        <p style="font-weight:500;margin-bottom:16px">Physical Barriers</p>
        <p>EBTA's comprehensive isolation systems created impenetrable barriers between workers and fall hazards across the Eastern Freeway project.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(255,204,0,0.05);border-radius:12px;border-left:3px solid #FFCC00">
          <h4 style="color:#FFCC00;margin-bottom:8px">Comprehensive Barrier Systems</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>1100mm compliant perimeter guardrails on all elevated work areas</li>
            <li>Advanced safety mesh systems protecting traffic and pedestrians below</li>
            <li>Engineered temporary covers over all deck openings and penetrations</li>
            <li>Physical exclusion zones with barriers around all crane operations</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Outstanding Protection Results</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>100% compliance with AS 1576 guardrail standards maintained</li>
            <li>Continuous protection maintained during all construction phases</li>
            <li>Seamless integration with permanent structure design</li>
            <li>Enhanced public safety through comprehensive mesh systems</li>
          </ul>
        </div>
      </div>
      
      <div id="story-4" class="story">
        <h2 style="color:#34C759">Level 4: ENGINEERING</h2>
        <p style="font-weight:500;margin-bottom:16px">Controlled Systems</p>
        <p>EBTA's engineered systems provided controlled access and fall protection when higher-level controls weren't feasible, maintaining professional standards.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(52,199,89,0.05);border-radius:12px;border-left:3px solid #34C759">
          <h4 style="color:#34C759;margin-bottom:8px">Professional Engineered Systems</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>System scaffolding designed and certified to AS 1576 standards</li>
            <li>Professional engineer-certified anchor points for fall protection</li>
            <li>Temporary work platforms with integrated safety features</li>
            <li>Dedicated Temporary Works Coordinator oversight for all systems</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Quality Assurance Excellence</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Professional engineer certification required for all temporary works</li>
            <li>Comprehensive load calculations with verified safety factors</li>
            <li>Regular inspections conducted by certified competent persons</li>
            <li>Rigorous documentation and record-keeping protocols maintained</li>
          </ul>
        </div>
      </div>
      
      <div id="story-5" class="story">
        <h2 style="color:#007AFF">Level 5: ADMINISTRATIVE</h2>
        <p style="font-weight:500;margin-bottom:16px">Procedures & Training</p>
        <p>EBTA's robust administrative procedures ensure consistent safety practices across all operations, providing systematic control through training and protocols.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(0,122,255,0.05);border-radius:12px;border-left:3px solid #007AFF">
          <h4 style="color:#007AFF;margin-bottom:8px">Comprehensive Administrative Controls</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Working at Heights permits mandatory for all work >2m fall risk</li>
            <li>Rigorous competency verification and ongoing training programs</li>
            <li>Daily toolbox talks and comprehensive safety briefings</li>
            <li>Detailed emergency response and rescue planning protocols</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Training Excellence</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Competency assessments aligned with industry standards</li>
            <li>Regular refresher training and skills verification</li>
            <li>Comprehensive induction programs for all personnel</li>
            <li>Continuous professional development pathways</li>
          </ul>
        </div>
      </div>
      
      <div id="story-6" class="story">
        <h2 style="color:#AF52DE">Level 6: PPE</h2>
        <p style="font-weight:500;margin-bottom:16px">Personal Protection</p>
        <p>When all other controls are exhausted, EBTA's premium PPE provides the final line of defense, ensuring worker protection as the last resort.</p>
        <div style="margin-top:20px;padding:16px;background:rgba(175,82,222,0.05);border-radius:12px;border-left:3px solid #AF52DE">
          <h4 style="color:#AF52DE;margin-bottom:8px">Premium PPE Standards</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>Full body harness systems with shock absorbing lanyards</li>
            <li>Mandatory daily pre-use equipment inspections</li>
            <li>Hard hats with chin straps and high-visibility clothing</li>
            <li>Regular equipment replacement and maintenance schedules</li>
          </ul>
        </div>
        <div style="margin-top:16px;padding:16px;background:rgba(0,0,0,0.02);border-radius:12px">
          <h4 style="color:var(--ink-1);margin-bottom:8px">Quality Assurance</h4>
          <ul style="color:var(--ink-2);line-height:1.5;padding-left:16px">
            <li>All PPE meets or exceeds Australian Standards requirements</li>
            <li>Comprehensive equipment tracking and maintenance logs</li>
            <li>Regular supplier audits and quality verification</li>
            <li>Emergency replacement procedures for damaged equipment</li>
          </ul>
        </div>
      </div>
    </section>

    <nav class="panel ctrl">
      <h3 style="text-align:center;color:var(--ink-2);font-weight:600">Explore Levels</h3>
      <button class="btn" data-level="1">1. Elimination</button>
      <button class="btn" data-level="2">2. Substitution</button>
      <button class="btn" data-level="3">3. Isolation</button>
      <button class="btn" data-level="4">4. Engineering</button>
      <button class="btn" data-level="5">5. Administrative</button>
      <button class="btn" data-level="6">6. PPE</button>
      <div class="util">
        <button class="btn" id="auto">Auto</button>
        <button class="btn" id="reset">Reset</button>
        <button class="btn" id="fs">Full Screen</button>
      </div>
    </nav>

    <footer class="panel ftr">
      <div>NEL-STH-NSA-5900-OHS-PRC-0008 Rev 04</div>
      <div style="font-weight:700;color:#555">MOST EFFECTIVE ↑  ↓ LEAST EFFECTIVE</div>
      <div><span style="color:var(--accent);font-weight:800">PREVENTION FIRST</span> Safety Excellence</div>
    </footer>
  </main>

  <!-- Three.js & extras (r128 APIs) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

  <script>
    (() => {
      const colors = [0xFF3B30, 0xFF9500, 0xFFCC00, 0x34C759, 0x007AFF, 0xAF52DE];

      let scene, camera, renderer, controls, composer, bloomPass;
      let raycaster, mouse;
      const meshes = [];
      let currentLevel = 0, autoTimer = null, autoOn = false;

      const canvas = document.getElementById('stage');

      init();
      build();
      animate();

      function init(){
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(50, 1, 0.1, 100);
        camera.position.set(0, 0.6, 15);

        renderer = new THREE.WebGLRenderer({
          canvas, antialias:true, alpha:true, powerPreference:'high-performance'
        });
        renderer.outputEncoding = THREE.sRGBEncoding;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.12;
        renderer.physicallyCorrectLights = true;
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enablePan = false;
        controls.enableDamping = true;
        controls.dampingFactor = 0.06;
        controls.minDistance = 9;
        controls.maxDistance = 22;

        // Lights – soft studio
        scene.add(new THREE.AmbientLight(0xffffff, 0.18));

        const key = new THREE.DirectionalLight(0xffffff, 1.0);
        key.position.set(4, 8, 6); key.castShadow = true; key.shadow.mapSize.set(1024,1024); key.shadow.radius = 3;
        scene.add(key);

        const rim = new THREE.DirectionalLight(0xffffff, 0.55);
        rim.position.set(-6, 5, -4);
        scene.add(rim);

        const fill = new THREE.HemisphereLight(0xffffff, 0x222233, 0.5);
        scene.add(fill);

        // Shadow plate (subtle contact)
        const plate = new THREE.Mesh(
          new THREE.PlaneBufferGeometry(40, 26),
          new THREE.ShadowMaterial({ opacity: 0.16 })
        );
        plate.rotation.x = -Math.PI/2;
        plate.position.y = -2.35;
        plate.receiveShadow = true;
        scene.add(plate);

        // Environment (HDR)
        const pmrem = new THREE.PMREMGenerator(renderer);
        pmrem.compileEquirectangularShader();
        new THREE.RGBELoader()
          .setDataType(THREE.UnsignedByteType)
          .setPath('https://cdn.jsdelivr.net/gh/gkjohnson/3d-demo-assets@master/hdri/')
          .load('royal_esplanade_1k.hdr', (hdr) => {
            const env = pmrem.fromEquirectangular(hdr).texture;
            scene.environment = env;
            hdr.dispose(); pmrem.dispose();
          });

        // Post
        composer = new THREE.EffectComposer(renderer);
        composer.addPass(new THREE.RenderPass(scene, camera));
        bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(1,1), 0.35, 0.6, 0.85);
        composer.addPass(bloomPass);

        // Interactions
        raycaster = new THREE.Raycaster();
        mouse = new THREE.Vector2();
        canvas.addEventListener('mousemove', onHover);
        canvas.addEventListener('click', onClick);

        // UI
        document.querySelectorAll('.btn[data-level]').forEach(b => b.addEventListener('click', () => select(+b.dataset.level)));
        document.getElementById('auto').addEventListener('click', toggleAuto);
        document.getElementById('reset').addEventListener('click', reset);
        document.getElementById('fs').addEventListener('click', toggleFull);

        window.addEventListener('resize', resize, {passive:true});
        resize();
      }

      function build(){
        const group = new THREE.Group();
        let y = 0;
        const h = 1.05, gap = 0.28, base = 11.0;

        for(let i=0;i<6;i++){
          const size = base * ((6 - i) / 6);
          const shape = new THREE.Shape()
            .moveTo(-size/2, -size/2)
            .lineTo( size/2, -size/2)
            .lineTo( size/2,  size/2)
            .lineTo(-size/2,  size/2)
            .lineTo(-size/2, -size/2);

          const geo = new THREE.ExtrudeBufferGeometry(shape, {
            depth: h, bevelEnabled:true, steps:2, bevelSegments:5, bevelSize:0.14, bevelThickness:0.14
          });

          const mat = new THREE.MeshPhysicalMaterial({
            color: colors[i],
            metalness: 0.0,
            roughness: 0.06,
            transmission: 1.0,
            thickness: 2.0,
            ior: 1.5,
            attenuationColor: new THREE.Color(0x9ecbff),
            attenuationDistance: 1.4,
            clearcoat: 1.0,
            clearcoatRoughness: 0.04,
            envMapIntensity: 1.15,
            transparent: true,
            opacity: 0.92
          });
          mat.emissive = new THREE.Color(colors[i]).multiplyScalar(0.02);
          mat.emissiveIntensity = 1.0;

          const mesh = new THREE.Mesh(geo, mat);
          mesh.position.y = y;
          mesh.castShadow = true;
          mesh.userData.level = i+1;
          mesh.userData.baseOpacity = 0.92;

          meshes.push(mesh);
          group.add(mesh);

          y += h + gap;
        }

        group.position.y = -(y/2) + h*0.5;
        scene.add(group);
      }

      function animate(){
        requestAnimationFrame(animate);
        controls.update();
        composer.render();
      }

      function resize(){
        const parent = canvas.parentElement;
        const w = Math.max(1, parent.clientWidth);
        const h = Math.max(1, parent.clientHeight);
        const dpr = Math.min(window.devicePixelRatio || 1, 2);
        renderer.setPixelRatio(dpr);
        renderer.setSize(w, h, false);
        camera.aspect = w/h; camera.updateProjectionMatrix();
        composer.setSize(w, h);
        bloomPass.setSize(w, h);
      }

      function onHover(e){
        const r = renderer.domElement.getBoundingClientRect();
        mouse.x = ((e.clientX - r.left) / r.width) * 2 - 1;
        mouse.y = -((e.clientY - r.top) / r.height) * 2 + 1;

        raycaster.setFromCamera(mouse, camera);
        const hit = raycaster.intersectObjects(meshes)[0]?.object;

        meshes.forEach(m => {
          const selected = (m.userData.level === currentLevel);
          const hovered = (m === hit);
          const target = selected ? 1.0 : hovered ? 0.96 : (currentLevel === 0 ? m.userData.baseOpacity : 0.54);
          // simple spring
          m.material.opacity += (target - m.material.opacity) * 0.12;
        });

        canvas.style.cursor = hit ? 'pointer' : 'grab';
      }

      function onClick(){
        raycaster.setFromCamera(mouse, camera);
        const hit = raycaster.intersectObjects(meshes)[0]?.object;
        if(hit) select(hit.userData.level);
      }

      function select(level){
        if(autoOn) toggleAuto(); // stop auto
        if(currentLevel === level) level = 0;
        currentLevel = level;

        document.querySelectorAll('.btn[data-level]').forEach(b => {
          b.classList.toggle('active', +b.dataset.level === level);
        });

        document.querySelectorAll('.story').forEach(s => s.classList.remove('active'));
        document.getElementById(level ? `story-${level}` : 'story-default').classList.add('active');

        meshes.forEach(m => {
          const selected = (m.userData.level === level);
          m.material.opacity = selected ? 1.0 : (level === 0 ? m.userData.baseOpacity : 0.54);
          m.material.emissiveIntensity = selected ? 0.25 : 1.0;
        });
      }

      function toggleAuto(){
        autoOn = !autoOn;
        document.getElementById('auto').classList.toggle('active', autoOn);
        clearInterval(autoTimer);
        if(autoOn){
          let i = currentLevel || 1;
          select(i);
          autoTimer = setInterval(() => { i = (i % 6) + 1; select(i); }, 4200);
        }
      }

      function reset(){
        select(0);
        if(autoOn) toggleAuto();
        controls.reset();
      }

      function toggleFull(){
        if(!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
      }
    })();
  </script>
</body>
</html>
Understanding the Contents of PastedContent.txt - Manus
